#!/usr/bin/env bash
echo "Starting: LocalTunnel"
npx localtunnel --port 22023 | tee bin/tunnelurl.txt &
tunnel_pid=$!
sleep 5

echo "Starting: The Server At Port 22023..."
screen -h 2048 -dmS server bin/Server/Impostor.Server
main_pid=$!
sleep 2

trap "kill $tunnel_pid $main_pid" SIGTERM
trap "kill -9 $tunnel_pid $main_pid; exit" SIGKILL

echo "Starting: The Web Server"
npx http-server bin/ -p $PORT
echo "THE WEB SERVER IS UP"